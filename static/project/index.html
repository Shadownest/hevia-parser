<!DOCTYPE html>
<html>
<head><meta charset="utf-8"></head>
<body>
  <textarea id="swift" style="margin: 0px; width: 509px; height: 246px;" spellcheck="false"></textarea>
  <br/>
  <textarea id="js" style="margin: 0px; width: 509px; height: 246px;" spellcheck="false"></textarea>
  <button id="run">Run</button>
  <script type="text/javascript" src="../dist/clam.js"></script>
  <script type="text/javascript">

    let clam = new Clam();

    let input = document.querySelector("#swift");

    let files = [
      "./const.swift",
      "./main.swift"
    ];

    let init = () => {

      clam.readProject(files, (src) => {
        input.oninput = compile;
        run.onmousedown = compile;
        input.value = src;
        compile(src);
      });

    };

    let compile = () => {

      let stream = input.value;

      let compiled = clam.compile(stream);

      js.value = compiled;

      clam.run(compiled);

    };

    init();

  </script>
</body>
</html>