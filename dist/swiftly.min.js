!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.CLAM=e()}}(function(){var e;return function t(e,n,i){function r(a,o){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,n,i){function r(e,t,n){var i=function(t,n){return e.js_beautify(t,n)};return i.js=e.js_beautify,i.css=t.css_beautify,i.html=n.html_beautify,i.js_beautify=e.js_beautify,i.css_beautify=t.css_beautify,i.html_beautify=n.html_beautify,i}"function"==typeof e&&e.amd?e(["./lib/beautify","./lib/beautify-css","./lib/beautify-html"],function(e,t,n){return r(e,t,n)}):!function(e){var n=t("./lib/beautify"),i=t("./lib/beautify-css"),s=t("./lib/beautify-html");e.exports=r(n,i,s)}(n)},{"./lib/beautify":4,"./lib/beautify-css":2,"./lib/beautify-html":3}],2:[function(t,n,i){(function(t){!function(){function n(e,t){function i(){return E=e.charAt(++g),E||""}function r(t){var n="",r=g;return t&&o(),n=e.charAt(g+1)||"",g=r-1,i(),n}function s(t){for(var n=g;i();)if("\\"===E)i();else{if(-1!==t.indexOf(E))break;if("\n"===E)break}return e.substring(n,g+1)}function a(e){var t=g,n=s(e);return g=t-1,i(),n}function o(){for(var e="";k.test(r());)i(),e+=E;return e}function l(){var e="";for(E&&k.test(E)&&(e=E);k.test(i());)e+=E;return e}function u(t){var n=g;for(t="/"===r(),i();i();){if(!t&&"*"===E&&"/"===r()){i();break}if(t&&"\n"===E)return e.substring(n,g)}return e.substring(n,g)+E}function c(t){return e.substring(g-t.length,g).toLowerCase()===t}function h(){for(var t=0,n=g+1;n<e.length;n++){var i=e.charAt(n);if("{"===i)return!0;if("("===i)t+=1;else if(")"===i){if(0===t)return!1;t-=1}else if(";"===i||"}"===i)return!1}return!1}function p(){K++,x+=O}function f(){K--,x=x.slice(0,-_)}t=t||{},e=e||"",e=e.replace(/\r\n|[\r\u2028\u2029]/g,"\n");var _=t.indent_size||4,d=t.indent_char||" ",y=void 0===t.selector_separator_newline?!0:t.selector_separator_newline,m=void 0===t.end_with_newline?!1:t.end_with_newline,v=void 0===t.newline_between_rules?!0:t.newline_between_rules,T=void 0===t.space_around_selector_separator?!1:t.space_around_selector_separator,b=t.eol?t.eol:"\n";"string"==typeof _&&(_=parseInt(_,10)),t.indent_with_tabs&&(d="	",_=1),b=b.replace(/\\r/,"\r").replace(/\\n/,"\n");var E,k=/^\s+$/,g=-1,w=0,x=e.match(/^[\t ]*/)[0],O=new Array(_+1).join(d),K=0,S=0,R={};R["{"]=function(e){R.singleSpace(),N.push(e),R.newLine()},R["}"]=function(e){R.newLine(),N.push(e),R.newLine()},R._lastCharWhitespace=function(){return k.test(N[N.length-1])},R.newLine=function(e){N.length&&(e||"\n"===N[N.length-1]||R.trim(),N.push("\n"),x&&N.push(x))},R.singleSpace=function(){N.length&&!R._lastCharWhitespace()&&N.push(" ")},R.preserveSingleSpace=function(){B&&R.singleSpace()},R.trim=function(){for(;R._lastCharWhitespace();)N.pop()};for(var N=[],A=!1,D=!1,C=!1,P="",I="";;){var L=l(),B=""!==L,j=-1!==L.indexOf("\n");if(I=P,P=E,!E)break;if("/"===E&&"*"===r()){var z=0===K;(j||z)&&R.newLine(),N.push(u()),R.newLine(),z&&R.newLine(!0)}else if("/"===E&&"/"===r())j||"{"===I||R.trim(),R.singleSpace(),N.push(u()),R.newLine();else if("@"===E)if(R.preserveSingleSpace(),"{"===r())N.push(s("}"));else{N.push(E);var M=a(": ,;{}()[]/='\"");M.match(/[ :]$/)&&(i(),M=s(": ").replace(/\s$/,""),N.push(M),R.singleSpace()),M=M.replace(/\s$/,""),M in n.NESTED_AT_RULE&&(S+=1,M in n.CONDITIONAL_GROUP_RULE&&(C=!0))}else"#"===E&&"{"===r()?(R.preserveSingleSpace(),N.push(s("}"))):"{"===E?"}"===r(!0)?(o(),i(),R.singleSpace(),N.push("{}"),R.newLine(),v&&0===K&&R.newLine(!0)):(p(),R["{"](E),C?(C=!1,A=K>S):A=K>=S):"}"===E?(f(),R["}"](E),A=!1,D=!1,S&&S--,v&&0===K&&R.newLine(!0)):":"===E?(o(),!A&&!C||c("&")||h()?":"===r()?(i(),N.push("::")):N.push(":"):(D=!0,N.push(":"),R.singleSpace())):'"'===E||"'"===E?(R.preserveSingleSpace(),N.push(s(E))):";"===E?(D=!1,N.push(E),R.newLine()):"("===E?c("url")?(N.push(E),o(),i()&&(")"!==E&&'"'!==E&&"'"!==E?N.push(s(")")):g--)):(w++,R.preserveSingleSpace(),N.push(E),o()):")"===E?(N.push(E),w--):","===E?(N.push(E),o(),y&&!D&&1>w?R.newLine():R.singleSpace()):">"===E||"+"===E||"~"===E?T&&!D&&1>w?(R.singleSpace(),N.push(E),R.singleSpace()):N.push(E):"]"===E?N.push(E):"["===E?(R.preserveSingleSpace(),N.push(E)):"="===E?(o(),E="=",N.push(E)):(R.preserveSingleSpace(),N.push(E))}var V="";return x&&(V+=x),V+=N.join("").replace(/[\r\n\t ]+$/,""),m&&(V+="\n"),"\n"!==b&&(V=V.replace(/[\n]/g,b)),V}n.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},n.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0},"function"==typeof e&&e.amd?e([],function(){return{css_beautify:n}}):"undefined"!=typeof i?i.css_beautify=n:"undefined"!=typeof window?window.css_beautify=n:"undefined"!=typeof t&&(t.css_beautify=n)}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,n,i){(function(n){!function(){function r(e){return e.replace(/^\s+/g,"")}function s(e){return e.replace(/\s+$/g,"")}function a(e,t,n,i){function a(){function e(e){var t="",n=function(n){var i=t+n.toLowerCase();t=i.length<=e.length?i:i.substr(i.length-e.length,e.length)},i=function(){return-1===t.indexOf(e)};return{add:n,doesNotMatch:i}}return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.newlines=0,this.indent_content=l,this.Utils={whitespace:"\n\r	 ".split(""),single_token:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","?php","basefont","isindex"],extra_liners:b,in_array:function(e,t){for(var n=0;n<t.length;n++)if(e===t[n])return!0;return!1}},this.is_whitespace=function(e){for(var t=0;t<e.length;t++)if(!this.Utils.in_array(e.charAt(t),this.Utils.whitespace))return!1;return!0},this.traverse_whitespace=function(){var e="";if(e=this.input.charAt(this.pos),this.Utils.in_array(e,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(e,this.Utils.whitespace);)_&&"\n"===e&&this.newlines<=d&&(this.newlines+=1),this.pos++,e=this.input.charAt(this.pos);return!0}return!1},this.space_or_wrap=function(e){return this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,e),this.print_indentation(e),!0):(this.line_char_count++,e.push(" "),!1)},this.get_content=function(){for(var e="",t=[];"<"!==this.input.charAt(this.pos);){if(this.pos>=this.input.length)return t.length?t.join(""):["","TK_EOF"];if(this.traverse_whitespace())this.space_or_wrap(t);else{if(y){var n=this.input.substr(this.pos,3);if("{{#"===n||"{{/"===n)break;if("{{!"===n)return[this.get_tag(),"TK_TAG_HANDLEBARS_COMMENT"];if("{{"===this.input.substr(this.pos,2)&&"{{else}}"===this.get_tag(!0))break}e=this.input.charAt(this.pos),this.pos++,this.line_char_count++,t.push(e)}}return t.length?t.join(""):""},this.get_contents_to=function(e){if(this.pos===this.input.length)return["","TK_EOF"];var t="",n=new RegExp("</"+e+"\\s*>","igm");n.lastIndex=this.pos;var i=n.exec(this.input),r=i?i.index:this.input.length;return this.pos<r&&(t=this.input.substring(this.pos,r),this.pos=r),t},this.record_tag=function(e){this.tags[e+"count"]?(this.tags[e+"count"]++,this.tags[e+this.tags[e+"count"]]=this.indent_level):(this.tags[e+"count"]=1,this.tags[e+this.tags[e+"count"]]=this.indent_level),this.tags[e+this.tags[e+"count"]+"parent"]=this.tags.parent,this.tags.parent=e+this.tags[e+"count"]},this.retrieve_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!==t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]],this.tags.parent=this.tags[t+"parent"]),delete this.tags[e+this.tags[e+"count"]+"parent"],delete this.tags[e+this.tags[e+"count"]],1===this.tags[e+"count"]?delete this.tags[e+"count"]:this.tags[e+"count"]--}},this.indent_to_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!==t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]])}},this.get_tag=function(e){var t,n,i,r="",s=[],a="",o=!1,l=!0,u=this.pos,h=this.line_char_count;e=void 0!==e?e:!1;do{if(this.pos>=this.input.length)return e&&(this.pos=u,this.line_char_count=h),s.length?s.join(""):["","TK_EOF"];if(r=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(r,this.Utils.whitespace))o=!0;else{if("'"!==r&&'"'!==r||(r+=this.get_unformatted(r),o=!0),"="===r&&(o=!1),s.length&&"="!==s[s.length-1]&&">"!==r&&o){var p=this.space_or_wrap(s),_=p&&"/"!==r&&"force"!==m;if(o=!1,l||"force"!==m||"/"===r||(this.print_newline(!1,s),this.print_indentation(s),_=!0),_)for(var d=0;v>d;d++)s.push(c);for(var T=0;T<s.length;T++)if(" "===s[T]){l=!1;break}}if(y&&"<"===i&&r+this.input.charAt(this.pos)==="{{"&&(r+=this.get_unformatted("}}"),s.length&&" "!==s[s.length-1]&&"<"!==s[s.length-1]&&(r=" "+r),o=!0),"<"!==r||i||(t=this.pos-1,i="<"),y&&!i&&s.length>=2&&"{"===s[s.length-1]&&"{"===s[s.length-2]&&(t="#"===r||"/"===r||"!"===r?this.pos-3:this.pos-2,i="{"),this.line_char_count++,s.push(r),s[1]&&("!"===s[1]||"?"===s[1]||"%"===s[1])){s=[this.get_comment(t)];break}if(y&&s[1]&&"{"===s[1]&&s[2]&&"!"===s[2]){s=[this.get_comment(t)];break}if(y&&"{"===i&&s.length>2&&"}"===s[s.length-2]&&"}"===s[s.length-1])break}}while(">"!==r);var b,E,k=s.join("");b=-1!==k.indexOf(" ")?k.indexOf(" "):"{"===k.charAt(0)?k.indexOf("}"):k.indexOf(">"),E="<"!==k.charAt(0)&&y?"#"===k.charAt(2)?3:2:1;var g=k.substring(E,b).toLowerCase();return"/"===k.charAt(k.length-2)||this.Utils.in_array(g,this.Utils.single_token)?e||(this.tag_type="SINGLE"):y&&"{"===k.charAt(0)&&"else"===g?e||(this.indent_to_tag("if"),this.tag_type="HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):this.is_unformatted(g,f)?(a=this.get_unformatted("</"+g+">",k),s.push(a),n=this.pos-1,this.tag_type="SINGLE"):"script"===g&&(-1===k.search("type")||k.search("type")>-1&&k.search(/\b(text|application)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json)/)>-1)?e||(this.record_tag(g),this.tag_type="SCRIPT"):"style"===g&&(-1===k.search("type")||k.search("type")>-1&&k.search("text/css")>-1)?e||(this.record_tag(g),this.tag_type="STYLE"):"!"===g.charAt(0)?e||(this.tag_type="SINGLE",this.traverse_whitespace()):e||("/"===g.charAt(0)?(this.retrieve_tag(g.substring(1)),this.tag_type="END"):(this.record_tag(g),"html"!==g.toLowerCase()&&(this.indent_content=!0),this.tag_type="START"),this.traverse_whitespace()&&this.space_or_wrap(s),this.Utils.in_array(g,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!==this.output[this.output.length-2]&&this.print_newline(!0,this.output))),e&&(this.pos=u,this.line_char_count=h),s.join("")},this.get_comment=function(e){var t="",n=">",i=!1;this.pos=e;var r=this.input.charAt(this.pos);for(this.pos++;this.pos<=this.input.length&&(t+=r,t.charAt(t.length-1)!==n.charAt(n.length-1)||-1===t.indexOf(n));)!i&&t.length<10&&(0===t.indexOf("<![if")?(n="<![endif]>",i=!0):0===t.indexOf("<![cdata[")?(n="]]>",i=!0):0===t.indexOf("<![")?(n="]>",i=!0):0===t.indexOf("<!--")?(n="-->",i=!0):0===t.indexOf("{{!")?(n="}}",i=!0):0===t.indexOf("<?")?(n="?>",i=!0):0===t.indexOf("<%")&&(n="%>",i=!0)),r=this.input.charAt(this.pos),this.pos++;return t},this.get_unformatted=function(t,n){if(n&&-1!==n.toLowerCase().indexOf(t))return"";var i="",r="",s=!0,a=e(t);do{if(this.pos>=this.input.length)return r;if(i=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(i,this.Utils.whitespace)){if(!s){this.line_char_count--;continue}if("\n"===i||"\r"===i){r+="\n",this.line_char_count=0;continue}}r+=i,a.add(i),this.line_char_count++,s=!0,y&&"{"===i&&r.length&&"{"===r.charAt(r.length-2)&&(r+=this.get_unformatted("}}"))}while(a.doesNotMatch());return r},this.get_token=function(){var e;if("TK_TAG_SCRIPT"===this.last_token||"TK_TAG_STYLE"===this.last_token){var t=this.last_token.substr(7);return e=this.get_contents_to(t),"string"!=typeof e?e:[e,"TK_"+t]}if("CONTENT"===this.current_mode)return e=this.get_content(),"string"!=typeof e?e:[e,"TK_CONTENT"];if("TAG"===this.current_mode){if(e=this.get_tag(),"string"!=typeof e)return e;var n="TK_TAG_"+this.tag_type;return[e,n]}},this.get_full_indent=function(e){return e=this.indent_level+e||0,1>e?"":Array(e+1).join(this.indent_string)},this.is_unformatted=function(e,t){if(!this.Utils.in_array(e,t))return!1;if("a"!==e.toLowerCase()||!this.Utils.in_array("a",t))return!0;var n=this.get_tag(!0),i=(n||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!(i&&!this.Utils.in_array(i,t))},this.printer=function(e,t,n,i,a){this.input=e||"",this.input=this.input.replace(/\r\n|[\r\u2028\u2029]/g,"\n"),this.output=[],this.indent_character=t,this.indent_string="",this.indent_size=n,this.brace_style=a,this.indent_level=0,this.wrap_line_length=i,this.line_char_count=0;for(var o=0;o<this.indent_size;o++)this.indent_string+=this.indent_character;this.print_newline=function(e,t){this.line_char_count=0,t&&t.length&&(e||"\n"!==t[t.length-1])&&("\n"!==t[t.length-1]&&(t[t.length-1]=s(t[t.length-1])),t.push("\n"))},this.print_indentation=function(e){for(var t=0;t<this.indent_level;t++)e.push(this.indent_string),this.line_char_count+=this.indent_string.length},this.print_token=function(e){this.is_whitespace(e)&&!this.output.length||((e||""!==e)&&this.output.length&&"\n"===this.output[this.output.length-1]&&(this.print_indentation(this.output),e=r(e)),this.print_token_raw(e))},this.print_token_raw=function(e){this.newlines>0&&(e=s(e)),e&&""!==e&&(e.length>1&&"\n"===e.charAt(e.length-1)?(this.output.push(e.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(e));for(var t=0;t<this.newlines;t++)this.print_newline(t>0,this.output);this.newlines=0},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}var o,l,u,c,h,p,f,_,d,y,m,v,T,b,E;for(t=t||{},void 0!==t.wrap_line_length&&0!==parseInt(t.wrap_line_length,10)||void 0===t.max_char||0===parseInt(t.max_char,10)||(t.wrap_line_length=t.max_char),l=void 0===t.indent_inner_html?!1:t.indent_inner_html,u=void 0===t.indent_size?4:parseInt(t.indent_size,10),c=void 0===t.indent_char?" ":t.indent_char,p=void 0===t.brace_style?"collapse":t.brace_style,h=0===parseInt(t.wrap_line_length,10)?32786:parseInt(t.wrap_line_length||250,10),f=t.unformatted||["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","address","big","dt","ins","small","strike","tt","pre","h1","h2","h3","h4","h5","h6"],_=void 0===t.preserve_newlines?!0:t.preserve_newlines,d=_?isNaN(parseInt(t.max_preserve_newlines,10))?32786:parseInt(t.max_preserve_newlines,10):0,y=void 0===t.indent_handlebars?!1:t.indent_handlebars,m=void 0===t.wrap_attributes?"auto":t.wrap_attributes,v=isNaN(parseInt(t.wrap_attributes_indent_size,10))?u:parseInt(t.wrap_attributes_indent_size,10),T=void 0===t.end_with_newline?!1:t.end_with_newline,b="object"==typeof t.extra_liners&&t.extra_liners?t.extra_liners.concat():"string"==typeof t.extra_liners?t.extra_liners.split(","):"head,body,/html".split(","),E=t.eol?t.eol:"\n",t.indent_with_tabs&&(c="	",u=1),E=E.replace(/\\r/,"\r").replace(/\\n/,"\n"),o=new a,o.printer(e,c,u,h,p);;){var k=o.get_token();if(o.token_text=k[0],o.token_type=k[1],"TK_EOF"===o.token_type)break;switch(o.token_type){case"TK_TAG_START":o.print_newline(!1,o.output),o.print_token(o.token_text),o.indent_content&&(o.indent(),o.indent_content=!1),o.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":o.print_newline(!1,o.output),o.print_token(o.token_text),o.current_mode="CONTENT";break;case"TK_TAG_END":if("TK_CONTENT"===o.last_token&&""===o.last_text){var g=o.token_text.match(/\w+/)[0],w=null;o.output.length&&(w=o.output[o.output.length-1].match(/(?:<|{{#)\s*(\w+)/)),(null===w||w[1]!==g&&!o.Utils.in_array(w[1],f))&&o.print_newline(!1,o.output)}o.print_token(o.token_text),o.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var x=o.token_text.match(/^\s*<([a-z-]+)/i);x&&o.Utils.in_array(x[1],f)||o.print_newline(!1,o.output),o.print_token(o.token_text),o.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":for(var O=!1,K=o.output.length-1;K>=0&&"\n"!==o.output[K];K--)if(o.output[K].match(/{{#if/)){O=!0;break}O||o.print_newline(!1,o.output),o.print_token(o.token_text),o.indent_content&&(o.indent(),o.indent_content=!1),o.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_COMMENT":o.print_token(o.token_text),o.current_mode="TAG";break;case"TK_CONTENT":o.print_token(o.token_text),o.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(""!==o.token_text){o.print_newline(!1,o.output);var S,R=o.token_text,N=1;"TK_SCRIPT"===o.token_type?S="function"==typeof n&&n:"TK_STYLE"===o.token_type&&(S="function"==typeof i&&i),"keep"===t.indent_scripts?N=0:"separate"===t.indent_scripts&&(N=-o.indent_level);var A=o.get_full_indent(N);if(S){var D=function(){this.eol="\n"};D.prototype=t;var C=new D;R=S(R.replace(/^\s*/,A),C)}else{var P=R.match(/^\s*/)[0],I=P.match(/[^\n\r]*$/)[0].split(o.indent_string).length-1,L=o.get_full_indent(N-I);R=R.replace(/^\s*/,A).replace(/\r\n|\r|\n/g,"\n"+L).replace(/\s+$/,"")}R&&(o.print_token_raw(R),o.print_newline(!0,o.output))}o.current_mode="TAG";break;default:""!==o.token_text&&o.print_token(o.token_text)}o.last_token=o.token_type,o.last_text=o.token_text}var B=o.output.join("").replace(/[\r\n\t ]+$/,"");return T&&(B+="\n"),"\n"!==E&&(B=B.replace(/[\n]/g,E)),B}if("function"==typeof e&&e.amd)e(["require","./beautify","./beautify-css"],function(e){var t=e("./beautify"),n=e("./beautify-css");return{html_beautify:function(e,i){return a(e,i,t.js_beautify,n.css_beautify)}}});else if("undefined"!=typeof i){var o=t("./beautify.js"),l=t("./beautify-css.js");i.html_beautify=function(e,t){return a(e,t,o.js_beautify,l.css_beautify)}}else"undefined"!=typeof window?window.html_beautify=function(e,t){return a(e,t,window.js_beautify,window.css_beautify)}:"undefined"!=typeof n&&(n.html_beautify=function(e,t){return a(e,t,n.js_beautify,n.css_beautify)})}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./beautify-css.js":2,"./beautify.js":4}],4:[function(t,n,i){(function(t){Object.values||(Object.values=function(e){if(e!==Object(e))throw new TypeError("Object.values called on a non-object");var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(e[t]);return n}),function(){function n(e,t){function n(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function i(e){return e.replace(/^\s+|\s+$/g,"")}function r(e){return e.replace(/^\s+/g,"")}function s(e){e=e||h.before_newline;var t=Object.values(h);if(!n(e,t))throw new Error("Invalid Option Value: The option 'operator_position' must be one of the following values\n"+t+"\nYou passed in: '"+e+"'");return e}function a(e,t){"use strict";function a(e,t){var n=0;e&&(n=e.indentation_level,!X.just_added_newline()&&e.line_indent_level>n&&(n=e.line_indent_level));var i={mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,line_indent_level:e?e.line_indent_level:n,start_line_index:X.get_line_number(),ternary_depth:0};return i}function o(e){var t=e.newlines,n=re.keep_array_indentation&&k(J.mode);if(n)for(var i=0;t>i;i+=1)y(i>0);else if(re.max_preserve_newlines&&t>re.max_preserve_newlines&&(t=re.max_preserve_newlines),re.preserve_newlines&&e.newlines>1){y();for(var r=1;t>r;r+=1)y(!0)}H=e,ie[H.type]()}function _(e){e=e.replace(c.allLineBreaks,"\n");for(var t=[],n=e.indexOf("\n");-1!==n;)t.push(e.substring(0,n)),e=e.substring(n+1),n=e.indexOf("\n");return e.length&&t.push(e),t}function d(e){if(e=void 0===e?!1:e,!X.just_added_newline()){var t=re.preserve_newlines&&H.wanted_newline||e,i=n(J.last_text,q.positionable_operators)||n(H.text,q.positionable_operators);if(i){var r=n(J.last_text,q.positionable_operators)&&n(re.operator_position,p)||n(H.text,q.positionable_operators);t=t&&r}if(t)y(!1,!0);else if(re.wrap_line_length){if("TK_RESERVED"===Q&&n(J.last_text,le))return;var s=X.current_line.get_character_count()+H.text.length+(X.space_before_token?1:0);s>=re.wrap_line_length&&y(!1,!0)}}}function y(e,t){if(!t&&";"!==J.last_text&&","!==J.last_text&&"="!==J.last_text&&"TK_OPERATOR"!==Q)for(;J.mode===f.Statement&&!J.if_block&&!J.do_block;)w();X.add_new_line(e)&&(J.multiline_frame=!0)}function m(){X.just_added_newline()&&(re.keep_array_indentation&&k(J.mode)&&H.wanted_newline?(X.current_line.push(H.whitespace_before),X.space_before_token=!1):X.set_indent(J.indentation_level)&&(J.line_indent_level=J.indentation_level))}function v(e){if(X.raw)return void X.add_raw_token(H);if(re.comma_first&&"TK_COMMA"===Q&&X.just_added_newline()&&","===X.previous_line.last()){var t=X.previous_line.pop();X.previous_line.is_empty()&&(X.previous_line.push(t),X.trim(!0),X.current_line.pop(),X.trim()),m(),X.add_token(","),X.space_before_token=!0}e=e||H.text,m(),X.add_token(e)}function T(){J.indentation_level+=1}function b(){J.indentation_level>0&&(!J.parent||J.indentation_level>J.parent.indentation_level)&&(J.indentation_level-=1)}function E(e){J?(te.push(J),ee=J):ee=a(null,e),J=a(ee,e)}function k(e){return e===f.ArrayLiteral}function g(e){return n(e,[f.Expression,f.ForInitializer,f.Conditional])}function w(){te.length>0&&(ee=J,J=te.pop(),ee.mode===f.Statement&&X.remove_redundant_indentation(ee))}function x(){return J.parent.mode===f.ObjectLiteral&&J.mode===f.Statement&&(":"===J.last_text&&0===J.ternary_depth||"TK_RESERVED"===Q&&n(J.last_text,["get","set"]))}function O(){return"TK_RESERVED"===Q&&n(J.last_text,["var","let","const"])&&"TK_WORD"===H.type||"TK_RESERVED"===Q&&"do"===J.last_text||"TK_RESERVED"===Q&&n(J.last_text,["return","throw"])&&!H.wanted_newline||"TK_RESERVED"===Q&&"else"===J.last_text&&("TK_RESERVED"!==H.type||"if"!==H.text)||"TK_END_EXPR"===Q&&(ee.mode===f.ForInitializer||ee.mode===f.Conditional)||"TK_WORD"===Q&&J.mode===f.BlockStatement&&!J.in_case&&"--"!==H.text&&"++"!==H.text&&"function"!==Y&&"TK_WORD"!==H.type&&"TK_RESERVED"!==H.type||J.mode===f.ObjectLiteral&&(":"===J.last_text&&0===J.ternary_depth||"TK_RESERVED"===Q&&n(J.last_text,["get","set"]))?(E(f.Statement),T(),"TK_RESERVED"===Q&&n(J.last_text,["var","let","const"])&&"TK_WORD"===H.type&&(J.declaration_statement=!0),x()||d("TK_RESERVED"===H.type&&n(H.text,["do","for","if","while"])),!0):!1}function K(e,t){for(var n=0;n<e.length;n++){var r=i(e[n]);if(r.charAt(0)!==t)return!1}return!0}function S(e,t){for(var n,i=0,r=e.length;r>i;i++)if(n=e[i],n&&0!==n.indexOf(t))return!1;return!0}function R(e){return n(e,["case","return","do","if","throw","else"])}function N(e){var t=$+(e||0);return 0>t||t>=se.length?null:se[t]}function A(){O();var e=f.Expression;if("["===H.text){if("TK_WORD"===Q||")"===J.last_text)return"TK_RESERVED"===Q&&n(J.last_text,q.line_starters)&&(X.space_before_token=!0),E(e),v(),T(),void(re.space_in_paren&&(X.space_before_token=!0));e=f.ArrayLiteral,k(J.mode)&&("["!==J.last_text&&(","!==J.last_text||"]"!==Y&&"}"!==Y)||re.keep_array_indentation||y())}else"TK_RESERVED"===Q&&"for"===J.last_text?e=f.ForInitializer:"TK_RESERVED"===Q&&n(J.last_text,["if","while"])&&(e=f.Conditional);";"===J.last_text||"TK_START_BLOCK"===Q?y():"TK_END_EXPR"===Q||"TK_START_EXPR"===Q||"TK_END_BLOCK"===Q||"."===J.last_text?d(H.wanted_newline):"TK_RESERVED"===Q&&"("===H.text||"TK_WORD"===Q||"TK_OPERATOR"===Q?"TK_RESERVED"===Q&&("function"===J.last_word||"typeof"===J.last_word)||"*"===J.last_text&&"function"===Y?re.space_after_anon_function&&(X.space_before_token=!0):"TK_RESERVED"!==Q||!n(J.last_text,q.line_starters)&&"catch"!==J.last_text||re.space_before_conditional&&(X.space_before_token=!0):X.space_before_token=!0,"("===H.text&&"TK_RESERVED"===Q&&"await"===J.last_word&&(X.space_before_token=!0),"("===H.text&&("TK_EQUALS"!==Q&&"TK_OPERATOR"!==Q||x()||d()),"("===H.text&&"TK_WORD"!==Q&&"TK_RESERVED"!==Q&&d(),E(e),v(),re.space_in_paren&&(X.space_before_token=!0),T()}function D(){for(;J.mode===f.Statement;)w();J.multiline_frame&&d("]"===H.text&&k(J.mode)&&!re.keep_array_indentation),re.space_in_paren&&("TK_START_EXPR"!==Q||re.space_in_empty_paren?X.space_before_token=!0:(X.trim(),X.space_before_token=!1)),"]"===H.text&&re.keep_array_indentation?(v(),w()):(w(),v()),X.remove_redundant_indentation(ee),J.do_while&&ee.mode===f.Conditional&&(ee.mode=f.Expression,J.do_block=!1,J.do_while=!1)}function C(){var e=N(1),t=N(2);E(t&&(n(t.text,[":",","])&&n(e.type,["TK_STRING","TK_WORD","TK_RESERVED"])||n(e.text,["get","set"])&&n(t.type,["TK_WORD","TK_RESERVED"]))?n(Y,["class","interface"])?f.BlockStatement:f.ObjectLiteral:"TK_OPERATOR"===Q&&"=>"===J.last_text?f.BlockStatement:n(Q,["TK_EQUALS","TK_START_EXPR","TK_COMMA","TK_OPERATOR"])||"TK_RESERVED"===Q&&n(J.last_text,["return","throw","import"])?f.ObjectLiteral:f.BlockStatement);var i=!e.comments_before.length&&"}"===e.text,r=i&&"function"===J.last_word&&"TK_END_EXPR"===Q;if("expand"===re.brace_style||"none"===re.brace_style&&H.wanted_newline)"TK_OPERATOR"!==Q&&(r||"TK_EQUALS"===Q||"TK_RESERVED"===Q&&R(J.last_text)&&"else"!==J.last_text)?X.space_before_token=!0:y(!1,!0);else{if("collapse-preserve-inline"===re.brace_style){var s=0,a=null;J.inline_frame=!0;do if(s+=1,a=N(s),a.wanted_newline){J.inline_frame=!1;break}while("TK_EOF"!==a.type&&("TK_END_BLOCK"!==a.type||a.opened!==H))}!k(ee.mode)||"TK_START_EXPR"!==Q&&"TK_COMMA"!==Q?"TK_OPERATOR"!==Q&&"TK_START_EXPR"!==Q&&("TK_START_BLOCK"===Q?y():X.space_before_token=!0):(("TK_COMMA"===Q||re.space_in_paren)&&(X.space_before_token=!0),"collapse-preserve-inline"===re.brace_style&&("TK_COMMA"===Q||"TK_START_EXPR"===Q&&J.inline_frame)&&(d(),ee.multiline_frame=ee.multiline_frame||J.multiline_frame,J.multiline_frame=!1))}v(),T()}function P(){for(;J.mode===f.Statement;)w();var e="TK_START_BLOCK"===Q;"expand"===re.brace_style?e||y():e||(J.inline_frame?X.space_before_token=!0:k(J.mode)&&re.keep_array_indentation?(re.keep_array_indentation=!1,y(),re.keep_array_indentation=!0):y()),w(),v()}function I(){if("TK_RESERVED"===H.type)if(n(H.text,["set","get"])&&J.mode!==f.ObjectLiteral)H.type="TK_WORD";else if(n(H.text,["as","from"])&&!J.import_block)H.type="TK_WORD";else if(J.mode===f.ObjectLiteral){var e=N(1);":"===e.text&&(H.type="TK_WORD")}if(O()||!H.wanted_newline||g(J.mode)||"TK_OPERATOR"===Q&&"--"!==J.last_text&&"++"!==J.last_text||"TK_EQUALS"===Q||!re.preserve_newlines&&"TK_RESERVED"===Q&&n(J.last_text,["var","let","const","set","get"])||y(),J.do_block&&!J.do_while){if("TK_RESERVED"===H.type&&"while"===H.text)return X.space_before_token=!0,v(),X.space_before_token=!0,void(J.do_while=!0);y(),J.do_block=!1}if(J.if_block)if(J.else_block||"TK_RESERVED"!==H.type||"else"!==H.text){for(;J.mode===f.Statement;)w();J.if_block=!1,J.else_block=!1}else J.else_block=!0;if("TK_RESERVED"===H.type&&("case"===H.text||"default"===H.text&&J.in_case_statement))return y(),(J.case_body||re.jslint_happy)&&(b(),J.case_body=!1),v(),J.in_case=!0,void(J.in_case_statement=!0);if("TK_RESERVED"===H.type&&"function"===H.text&&((n(J.last_text,["}",";"])||X.just_added_newline()&&!n(J.last_text,["[","{",":","=",","]))&&(X.just_added_blankline()||H.comments_before.length||(y(),y(!0))),"TK_RESERVED"===Q||"TK_WORD"===Q?"TK_RESERVED"===Q&&n(J.last_text,["get","set","new","return","export","async"])?X.space_before_token=!0:"TK_RESERVED"===Q&&"default"===J.last_text&&"export"===Y?X.space_before_token=!0:y():"TK_OPERATOR"===Q||"="===J.last_text?X.space_before_token=!0:(J.multiline_frame||!g(J.mode)&&!k(J.mode))&&y()),"TK_COMMA"!==Q&&"TK_START_EXPR"!==Q&&"TK_EQUALS"!==Q&&"TK_OPERATOR"!==Q||x()||d(),"TK_RESERVED"===H.type&&n(H.text,["function","get","set"]))return v(),void(J.last_word=H.text);if(ne="NONE","TK_END_BLOCK"===Q?"TK_RESERVED"===H.type&&n(H.text,["else","catch","finally","from"])?"expand"===re.brace_style||"end-expand"===re.brace_style||"none"===re.brace_style&&H.wanted_newline?ne="NEWLINE":(ne="SPACE",X.space_before_token=!0):ne="NEWLINE":"TK_SEMICOLON"===Q&&J.mode===f.BlockStatement?ne="NEWLINE":"TK_SEMICOLON"===Q&&g(J.mode)?ne="SPACE":"TK_STRING"===Q?ne="NEWLINE":"TK_RESERVED"===Q||"TK_WORD"===Q||"*"===J.last_text&&"function"===Y?ne="SPACE":"TK_START_BLOCK"===Q?ne=J.inline_frame?"SPACE":"NEWLINE":"TK_END_EXPR"===Q&&(X.space_before_token=!0,ne="NEWLINE"),"TK_RESERVED"===H.type&&n(H.text,q.line_starters)&&")"!==J.last_text&&(ne="else"===J.last_text||"export"===J.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===H.type&&n(H.text,["else","catch","finally"]))if("TK_END_BLOCK"!==Q||ee.mode!==f.BlockStatement||"expand"===re.brace_style||"end-expand"===re.brace_style||"none"===re.brace_style&&H.wanted_newline)y();else{X.trim(!0);var t=X.current_line;"}"!==t.last()&&y(),X.space_before_token=!0}else"NEWLINE"===ne?"TK_RESERVED"===Q&&R(J.last_text)?X.space_before_token=!0:"TK_END_EXPR"!==Q?"TK_START_EXPR"===Q&&"TK_RESERVED"===H.type&&n(H.text,["var","let","const"])||":"===J.last_text||("TK_RESERVED"===H.type&&"if"===H.text&&"else"===J.last_text?X.space_before_token=!0:y()):"TK_RESERVED"===H.type&&n(H.text,q.line_starters)&&")"!==J.last_text&&y():J.multiline_frame&&k(J.mode)&&","===J.last_text&&"}"===Y?y():"SPACE"===ne&&(X.space_before_token=!0);v(),J.last_word=H.text,"TK_RESERVED"===H.type&&("do"===H.text?J.do_block=!0:"if"===H.text?J.if_block=!0:"import"===H.text?J.import_block=!0:J.import_block&&"TK_RESERVED"===H.type&&"from"===H.text&&(J.import_block=!1))}function L(){for(O()&&(X.space_before_token=!1);J.mode===f.Statement&&!J.if_block&&!J.do_block;)w();J.import_block&&(J.import_block=!1),v()}function B(){O()?X.space_before_token=!0:"TK_RESERVED"===Q||"TK_WORD"===Q||J.inline_frame?X.space_before_token=!0:"TK_COMMA"===Q||"TK_START_EXPR"===Q||"TK_EQUALS"===Q||"TK_OPERATOR"===Q?x()||d():y(),v()}function j(){O(),J.declaration_statement&&(J.declaration_assignment=!0),X.space_before_token=!0,v(),X.space_before_token=!0}function z(){v(),X.space_before_token=!0,J.declaration_statement?(g(J.parent.mode)&&(J.declaration_assignment=!1),J.declaration_assignment?(J.declaration_assignment=!1,y(!1,!0)):re.comma_first&&d()):J.mode===f.ObjectLiteral||J.mode===f.Statement&&J.parent.mode===f.ObjectLiteral?(J.mode===f.Statement&&w(),J.inline_frame||y()):re.comma_first&&d()}function M(){if(O(),"TK_RESERVED"===Q&&R(J.last_text))return X.space_before_token=!0,void v();if("*"===H.text&&"TK_DOT"===Q)return void v();if("::"===H.text)return void v();if("TK_OPERATOR"===Q&&n(re.operator_position,p)&&d(),":"===H.text&&J.in_case)return J.case_body=!0,T(),v(),y(),void(J.in_case=!1);var e=!0,t=!0,i=!1,r="*"===H.text&&"TK_RESERVED"===Q&&"function"===J.last_text,s=n(H.text,["-","+"])&&(n(Q,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||n(J.last_text,q.line_starters)||","===J.last_text);if(":"===H.text?0===J.ternary_depth?e=!1:(J.ternary_depth-=1,i=!0):"?"===H.text&&(J.ternary_depth+=1),!s&&!r&&re.preserve_newlines&&n(H.text,q.positionable_operators)){var a=":"===H.text,o=a&&i,l=a&&!i;switch(re.operator_position){case h.before_newline:return X.space_before_token=!l,v(),a&&!o||d(),
void(X.space_before_token=!0);case h.after_newline:return X.space_before_token=!0,!a||o?N(1).wanted_newline?y(!1,!0):d():X.space_before_token=!1,v(),void(X.space_before_token=!0);case h.preserve_newline:return l||d(),e=!(X.just_added_newline()||l),X.space_before_token=e,v(),void(X.space_before_token=!0)}}n(H.text,["--","++","!","~"])||s?(e=!1,t=!1,!H.wanted_newline||"--"!==H.text&&"++"!==H.text||y(!1,!0),";"===J.last_text&&g(J.mode)&&(e=!0),"TK_RESERVED"===Q?e=!0:"TK_END_EXPR"===Q?e=!("]"===J.last_text&&("--"===H.text||"++"===H.text)):"TK_OPERATOR"===Q&&(e=n(H.text,["--","-","++","+"])&&n(J.last_text,["--","-","++","+"]),n(H.text,["+","-"])&&n(J.last_text,["--","++"])&&(t=!0)),(J.mode!==f.BlockStatement||J.inline_frame)&&J.mode!==f.Statement||"{"!==J.last_text&&";"!==J.last_text||y()):r&&(e=!1,t=!1),X.space_before_token=X.space_before_token||e,v(),X.space_before_token=t}function V(){if(X.raw)return X.add_raw_token(H),void(H.directives&&"end"===H.directives.preserve&&(X.raw=re.test_output_raw));if(H.directives)return y(!1,!0),v(),"start"===H.directives.preserve&&(X.raw=!0),void y(!1,!0);if(!c.newline.test(H.text)&&!H.wanted_newline)return X.space_before_token=!0,v(),void(X.space_before_token=!0);var e,t=_(H.text),n=!1,i=!1,s=H.whitespace_before,a=s.length;for(y(!1,!0),t.length>1&&(n=K(t.slice(1),"*"),i=S(t.slice(1),s)),v(t[0]),e=1;e<t.length;e++)y(!1,!0),n?v(" "+r(t[e])):i&&t[e].length>a?v(t[e].substring(a)):X.add_token(t[e]);y(!1,!0)}function U(){H.wanted_newline?y(!1,!0):X.trim(!0),X.space_before_token=!0,v(),y(!1,!0)}function F(){O(),"TK_RESERVED"===Q&&R(J.last_text)?X.space_before_token=!0:d(")"===J.last_text&&re.break_chained_methods),v()}function G(){v(),"\n"===H.text[H.text.length-1]&&y()}function W(){for(;J.mode===f.Statement;)w()}var X,$,q,H,Q,Y,Z,J,ee,te,ne,ie,re,se=[],ae="";for(ie={TK_START_EXPR:A,TK_END_EXPR:D,TK_START_BLOCK:C,TK_END_BLOCK:P,TK_WORD:I,TK_RESERVED:I,TK_SEMICOLON:L,TK_STRING:B,TK_EQUALS:j,TK_OPERATOR:M,TK_COMMA:z,TK_BLOCK_COMMENT:V,TK_COMMENT:U,TK_DOT:F,TK_UNKNOWN:G,TK_EOF:W},t=t?t:{},re={},void 0!==t.braces_on_own_line&&(re.brace_style=t.braces_on_own_line?"expand":"collapse"),re.brace_style=t.brace_style?t.brace_style:re.brace_style?re.brace_style:"collapse","expand-strict"===re.brace_style&&(re.brace_style="expand"),re.indent_size=t.indent_size?parseInt(t.indent_size,10):4,re.indent_char=t.indent_char?t.indent_char:" ",re.eol=t.eol?t.eol:"auto",re.preserve_newlines=void 0===t.preserve_newlines?!0:t.preserve_newlines,re.break_chained_methods=void 0===t.break_chained_methods?!1:t.break_chained_methods,re.max_preserve_newlines=void 0===t.max_preserve_newlines?0:parseInt(t.max_preserve_newlines,10),re.space_in_paren=void 0===t.space_in_paren?!1:t.space_in_paren,re.space_in_empty_paren=void 0===t.space_in_empty_paren?!1:t.space_in_empty_paren,re.jslint_happy=void 0===t.jslint_happy?!1:t.jslint_happy,re.space_after_anon_function=void 0===t.space_after_anon_function?!1:t.space_after_anon_function,re.keep_array_indentation=void 0===t.keep_array_indentation?!1:t.keep_array_indentation,re.space_before_conditional=void 0===t.space_before_conditional?!0:t.space_before_conditional,re.unescape_strings=void 0===t.unescape_strings?!1:t.unescape_strings,re.wrap_line_length=void 0===t.wrap_line_length?0:parseInt(t.wrap_line_length,10),re.e4x=void 0===t.e4x?!1:t.e4x,re.end_with_newline=void 0===t.end_with_newline?!1:t.end_with_newline,re.comma_first=void 0===t.comma_first?!1:t.comma_first,re.operator_position=s(t.operator_position),re.test_output_raw=void 0===t.test_output_raw?!1:t.test_output_raw,re.jslint_happy&&(re.space_after_anon_function=!0),t.indent_with_tabs&&(re.indent_char="	",re.indent_size=1),"auto"===re.eol&&(re.eol="\n",e&&c.lineBreak.test(e||"")&&(re.eol=e.match(c.lineBreak)[0])),re.eol=re.eol.replace(/\\r/,"\r").replace(/\\n/,"\n"),Z="";re.indent_size>0;)Z+=re.indent_char,re.indent_size-=1;var oe=0;if(e&&e.length){for(;" "===e.charAt(oe)||"	"===e.charAt(oe);)ae+=e.charAt(oe),oe+=1;e=e.substring(oe)}Q="TK_START_BLOCK",Y="",X=new l(Z,ae),X.raw=re.test_output_raw,te=[],E(f.BlockStatement),this.beautify=function(){function t(){return n=N()}var n,i;for(q=new u(e,re,Z),se=q.tokenize(),$=0;t();){for(var r=0;r<n.comments_before.length;r++)o(n.comments_before[r]);o(n),Y=J.last_text,Q=n.type,J.last_text=n.text,$+=1}return i=X.get_code(),re.end_with_newline&&(i+="\n"),"\n"!==re.eol&&(i=i.replace(/[\n]/g,re.eol)),i};var le=["break","contiue","return","throw"]}function o(e){var t=0,n=-1,i=[],r=!0;this.set_indent=function(i){t=e.baseIndentLength+i*e.indent_length,n=i},this.get_character_count=function(){return t},this.is_empty=function(){return r},this.last=function(){return this._empty?null:i[i.length-1]},this.push=function(e){i.push(e),t+=e.length,r=!1},this.pop=function(){var e=null;return r||(e=i.pop(),t-=e.length,r=0===i.length),e},this.remove_indent=function(){n>0&&(n-=1,t-=e.indent_length)},this.trim=function(){for(;" "===this.last();)i.pop(),t-=1;r=0===i.length},this.toString=function(){var t="";return this._empty||(n>=0&&(t=e.indent_cache[n]),t+=i.join("")),t}}function l(e,t){t=t||"",this.indent_cache=[t],this.baseIndentLength=t.length,this.indent_length=e.length,this.raw=!1;var n=[];this.baseIndentString=t,this.indent_string=e,this.previous_line=null,this.current_line=null,this.space_before_token=!1,this.add_outputline=function(){this.previous_line=this.current_line,this.current_line=new o(this),n.push(this.current_line)},this.add_outputline(),this.get_line_number=function(){return n.length},this.add_new_line=function(e){return 1===this.get_line_number()&&this.just_added_newline()?!1:e||!this.just_added_newline()?(this.raw||this.add_outputline(),!0):!1},this.get_code=function(){var e=n.join("\n").replace(/[\r\n\t ]+$/,"");return e},this.set_indent=function(e){if(n.length>1){for(;e>=this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string);return this.current_line.set_indent(e),!0}return this.current_line.set_indent(0),!1},this.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.add_outputline();this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1},this.add_token=function(e){this.add_space_before_token(),this.current_line.push(e)},this.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" "),this.space_before_token=!1},this.remove_redundant_indentation=function(e){if(!e.multiline_frame&&e.mode!==f.ForInitializer&&e.mode!==f.Conditional)for(var t=e.start_line_index,i=n.length;i>t;)n[t].remove_indent(),t++},this.trim=function(i){for(i=void 0===i?!1:i,this.current_line.trim(e,t);i&&n.length>1&&this.current_line.is_empty();)n.pop(),this.current_line=n[n.length-1],this.current_line.trim();this.previous_line=n.length>1?n[n.length-2]:null},this.just_added_newline=function(){return this.current_line.is_empty()},this.just_added_blankline=function(){if(this.just_added_newline()){if(1===n.length)return!0;var e=n[n.length-2];return e.is_empty()}return!1}}function u(e,t){function r(e){if(!e.match(w))return null;var t={};x.lastIndex=0;for(var n=x.exec(e);n;)t[n[1]]=n[2],n=x.exec(e);return t}function s(){var s,w=[];if(d=0,y="",T>=b)return["","TK_EOF"];var x;x=v.length?v[v.length-1]:new _("TK_START_BLOCK","{");var S=e.charAt(T);for(T+=1;n(S,o);){if(c.newline.test(S)?"\n"===S&&"\r"===e.charAt(T-2)||(d+=1,w=[]):w.push(S),T>=b)return["","TK_EOF"];S=e.charAt(T),T+=1}if(w.length&&(y=w.join("")),l.test(S)||"."===S&&l.test(e.charAt(T))){var R=!0,N=!0,A=l;for("0"===S&&b>T&&/[XxOoBb]/.test(e.charAt(T))?(R=!1,N=!1,A=/[Bb]/.test(e.charAt(T))?u:/[Oo]/.test(e.charAt(T))?h:p,S+=e.charAt(T),T+=1):"."===S?R=!1:(S="",T-=1);b>T&&A.test(e.charAt(T));)S+=e.charAt(T),T+=1,R&&b>T&&"."===e.charAt(T)?(S+=e.charAt(T),T+=1,R=!1):N&&b>T&&/[Ee]/.test(e.charAt(T))&&(S+=e.charAt(T),T+=1,b>T&&/[+-]/.test(e.charAt(T))&&(S+=e.charAt(T),T+=1),N=!1,R=!1);return[S,"TK_WORD"]}if(c.isIdentifierStart(e.charCodeAt(T-1))){if(b>T)for(;c.isIdentifierChar(e.charCodeAt(T))&&(S+=e.charAt(T),T+=1,T!==b););return"TK_DOT"===x.type||"TK_RESERVED"===x.type&&n(x.text,["set","get"])||!n(S,E)?[S,"TK_WORD"]:"in"===S?[S,"TK_OPERATOR"]:[S,"TK_RESERVED"]}if("("===S||"["===S)return[S,"TK_START_EXPR"];if(")"===S||"]"===S)return[S,"TK_END_EXPR"];if("{"===S)return[S,"TK_START_BLOCK"];if("}"===S)return[S,"TK_END_BLOCK"];if(";"===S)return[S,"TK_SEMICOLON"];if("/"===S){var D,C="";if("*"===e.charAt(T)){T+=1,k.lastIndex=T,D=k.exec(e),C="/*"+D[0],T+=D[0].length;var P=r(C);return P&&"start"===P.ignore&&(O.lastIndex=T,D=O.exec(e),C+=D[0],T+=D[0].length),C=C.replace(c.allLineBreaks,"\n"),[C,"TK_BLOCK_COMMENT",P]}if("/"===e.charAt(T))return T+=1,g.lastIndex=T,D=g.exec(e),C="//"+D[0],T+=D[0].length,[C,"TK_COMMENT"]}var I=/^<([-a-zA-Z:0-9_.]+|{.+?}|!\[CDATA\[[\s\S]*?\]\])(\s+{.+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.+?}))*\s*(\/?)\s*>/;if("`"===S||"'"===S||'"'===S||("/"===S||t.e4x&&"<"===S&&e.slice(T-1).match(I))&&("TK_RESERVED"===x.type&&n(x.text,["return","case","throw","else","do","typeof","yield"])||"TK_END_EXPR"===x.type&&")"===x.text&&x.parent&&"TK_RESERVED"===x.parent.type&&n(x.parent.text,["if","while","for"])||n(x.type,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var L=S,B=!1,j=!1;if(s=S,"/"===L)for(var z=!1;b>T&&(B||z||e.charAt(T)!==L)&&!c.newline.test(e.charAt(T));)s+=e.charAt(T),B?B=!1:(B="\\"===e.charAt(T),"["===e.charAt(T)?z=!0:"]"===e.charAt(T)&&(z=!1)),T+=1;else if(t.e4x&&"<"===L){var M=/<(\/?)([-a-zA-Z:0-9_.]+|{.+?}|!\[CDATA\[[\s\S]*?\]\])(\s+{.+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.+?}))*\s*(\/?)\s*>/g,V=e.slice(T-1),U=M.exec(V);if(U&&0===U.index){for(var F=U[2],G=0;U;){var W=!!U[1],X=U[2],$=!!U[U.length-1]||"![CDATA["===X.slice(0,8);if(X!==F||$||(W?--G:++G),0>=G)break;U=M.exec(V)}var q=U?U.index+U[0].length:V.length;return V=V.slice(0,q),T+=q-1,V=V.replace(c.allLineBreaks,"\n"),[V,"TK_STRING"]}}else{var H=function(t,n,i){for(var r;b>T&&(r=e.charAt(T),B||r!==t&&(n||!c.newline.test(r)));)(B||n)&&c.newline.test(r)?("\r"===r&&"\n"===e.charAt(T+1)&&(T+=1,r=e.charAt(T)),s+="\n"):s+=r,B?("x"!==r&&"u"!==r||(j=!0),B=!1):B="\\"===r,T+=1,i&&-1!==s.indexOf(i,s.length-i.length)&&("`"===t?H("}",n,"`"):H("`",n,"${"))};"`"===L?H("`",!0,"${"):H(L)}if(j&&t.unescape_strings&&(s=a(s)),b>T&&e.charAt(T)===L&&(s+=L,T+=1,"/"===L))for(;b>T&&c.isIdentifierStart(e.charCodeAt(T));)s+=e.charAt(T),T+=1;return[s,"TK_STRING"]}if("#"===S){if(0===v.length&&"!"===e.charAt(T)){for(s=S;b>T&&"\n"!==S;)S=e.charAt(T),s+=S,T+=1;return[i(s)+"\n","TK_UNKNOWN"]}var Q="#";if(b>T&&l.test(e.charAt(T))){do S=e.charAt(T),Q+=S,T+=1;while(b>T&&"#"!==S&&"="!==S);return"#"===S||("["===e.charAt(T)&&"]"===e.charAt(T+1)?(Q+="[]",T+=2):"{"===e.charAt(T)&&"}"===e.charAt(T+1)&&(Q+="{}",T+=2)),[Q,"TK_WORD"]}}if("<"===S&&("?"===e.charAt(T)||"%"===e.charAt(T))){K.lastIndex=T-1;var Y=K.exec(e);if(Y)return S=Y[0],T+=S.length-1,S=S.replace(c.allLineBreaks,"\n"),[S,"TK_STRING"]}if("<"===S&&"<!--"===e.substring(T-1,T+3)){for(T+=3,S="<!--";!c.newline.test(e.charAt(T))&&b>T;)S+=e.charAt(T),T++;return m=!0,[S,"TK_COMMENT"]}if("-"===S&&m&&"-->"===e.substring(T-1,T+2))return m=!1,T+=2,["-->","TK_COMMENT"];if("."===S)return[S,"TK_DOT"];if(n(S,f)){for(;b>T&&n(S+e.charAt(T),f)&&(S+=e.charAt(T),T+=1,!(T>=b)););return","===S?[S,"TK_COMMA"]:"="===S?[S,"TK_EQUALS"]:[S,"TK_OPERATOR"]}return[S,"TK_UNKNOWN"]}function a(e){for(var t,n=!1,i="",r=0,s="",a=0;n||r<e.length;)if(t=e.charAt(r),r++,n){if(n=!1,"x"===t)s=e.substr(r,2),r+=2;else{if("u"!==t){i+="\\"+t;continue}s=e.substr(r,4),r+=4}if(!s.match(/^[0123456789abcdefABCDEF]+$/))return e;if(a=parseInt(s,16),a>=0&&32>a){i+="x"===t?"\\x"+s:"\\u"+s;continue}if(34===a||39===a||92===a)i+="\\"+String.fromCharCode(a);else{if("x"===t&&a>126&&255>=a)return e;i+=String.fromCharCode(a)}}else"\\"===t?n=!0:i+=t;return i}var o="\n\r	 ".split(""),l=/[0-9]/,u=/[01]/,h=/[01234567]/,p=/[0123456789abcdefABCDEF]/;this.positionable_operators="!= !== % & && * ** + - / : < << <= == === > >= >> >>> ? ^ | ||".split(" ");var f=this.positionable_operators.concat("! %= &= *= **= ++ += , -- -= /= :: <<= = => >>= >>>= ^= |= ~".split(" "));this.line_starters="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(",");var d,y,m,v,T,b,E=this.line_starters.concat(["do","in","else","get","set","new","catch","finally","typeof","yield","async","await","from","as"]),k=/([\s\S]*?)((?:\*\/)|$)/g,g=/([^\n\r\u2028\u2029]*)/g,w=/\/\* beautify( \w+[:]\w+)+ \*\//g,x=/ (\w+)[:](\w+)/g,O=/([\s\S]*?)((?:\/\*\sbeautify\signore:end\s\*\/)|$)/g,K=/((<\?php|<\?=)[\s\S]*?\?>)|(<%[\s\S]*?%>)/g;this.tokenize=function(){b=e.length,T=0,m=!1,v=[];for(var t,n,i,r=null,a=[],o=[];!n||"TK_EOF"!==n.type;){for(i=s(),t=new _(i[1],i[0],d,y);"TK_COMMENT"===t.type||"TK_BLOCK_COMMENT"===t.type||"TK_UNKNOWN"===t.type;)"TK_BLOCK_COMMENT"===t.type&&(t.directives=i[2]),o.push(t),i=s(),t=new _(i[1],i[0],d,y);o.length&&(t.comments_before=o,o=[]),"TK_START_BLOCK"===t.type||"TK_START_EXPR"===t.type?(t.parent=n,a.push(r),r=t):("TK_END_BLOCK"===t.type||"TK_END_EXPR"===t.type)&&r&&("]"===t.text&&"["===r.text||")"===t.text&&"("===r.text||"}"===t.text&&"{"===r.text)&&(t.parent=r.parent,t.opened=r,r=a.pop()),v.push(t),n=t}return v}}var c={};!function(e){var t="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",n="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",i=new RegExp("["+t+"]"),r=new RegExp("["+t+n+"]");e.newline=/[\n\r\u2028\u2029]/,e.lineBreak=new RegExp("\r\n|"+e.newline.source),e.allLineBreaks=new RegExp(e.lineBreak.source,"g"),e.isIdentifierStart=function(e){return 65>e?36===e||64===e:91>e?!0:97>e?95===e:123>e?!0:e>=170&&i.test(String.fromCharCode(e))},e.isIdentifierChar=function(e){return 48>e?36===e:58>e?!0:65>e?!1:91>e?!0:97>e?95===e:123>e?!0:e>=170&&r.test(String.fromCharCode(e))}}(c);var h={before_newline:"before-newline",after_newline:"after-newline",preserve_newline:"preserve-newline"},p=[h.before_newline,h.preserve_newline],f={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},_=function(e,t,n,i,r){this.type=e,this.text=t,this.comments_before=[],this.newlines=n||0,this.wanted_newline=n>0,this.whitespace_before=i||"",this.parent=r||null,this.opened=null,this.directives=null},d=new a(e,t);return d.beautify()}"function"==typeof e&&e.amd?e([],function(){return{js_beautify:n}}):"undefined"!=typeof i?i.js_beautify=n:"undefined"!=typeof window?window.js_beautify=n:"undefined"!=typeof t&&(t.js_beautify=n)}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=(e("../../utils"),e("../../Generate")),u=i(l),c=(e("../../Tokenize/tokens"),e("../../Parse/nodes")),h=function(e){function t(){r(this,t);var e=s(this,Object.getPrototypeOf(t).call(this,null));return e["export"]="_export",e.global="_global",e.runtime="_runtime",e}return a(t,e),o(t,[{key:"run",value:function(e){window.print=function(){console.log.apply(console,arguments)};var t={},n=new Function("global","exports",e);n({},t)}},{key:"compile",value:function(e){return this.reset(),this.emitStartHeader(),this.pushScope(e.context),this.compileBlock(e.body.body),this.emitEndHeader(),this.scope=e.context,this.output}},{key:"emitStartHeader",value:function(){this.write("(() => {\n"),this.write("let swift = new Swiftly();"),this.write("((_global, _export, _runtime) => {\n")}},{key:"emitEndHeader",value:function(){this.write("})(\n"),this.write("swift.runtime.global,\n"),this.write("typeof exports !== 'undefined' ? exports : this,\n"),this.write("swift.runtime\n"),this.write(");\n"),this.write("})();\n")}},{key:"compileBlock",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var a=r.value;a.kind===c.Types.Statement&&(this.compileStatement(a),this.write(";"))}}catch(o){n=!0,i=o}finally{try{!t&&s["return"]&&s["return"]()}finally{if(n)throw i}}}},{key:"compileStatement",value:function(e){var t=e.body||e;switch(t.kind){case c.Types.ImportStatement:this.compileImport(t);break;case c.Types.VariableDeclaration:this.compileVariableDeclaration(t);break;case c.Types.MultipleVariableDeclaration:this.compileMultipleVariableDeclaration(t);break;case c.Types.IfStatement:this.compileIfStatement(t);break;case c.Types.FunctionDeclaration:this.compileFunctionDeclaration(e);break;case c.Types.ReturnStatement:this.compileReturnStatement(t);break;case c.Types.Enumeration:this.compileEnumeration(e);break;case c.Types.CallExpression:this.compileCallExpression(t);break;case c.Types.MemberExpression:this.compileMemberExpression(t);break;case c.Types.Literal:case c.Types.Parameter:case c.Types.Identifier:this.write(this.compileIdentifier(t));break;default:this.compileBinaryExpression(t)}}},{key:"compileIdentifier",value:function(e,t){var n=null;if(e.kind===c.Types.Identifier){if(n=this.scope.get(e.name,this.scope)){if(e.isPointer)return e.name;if(n.kind===c.Types.Parameter){if(!e.isPointer&&n.reference)return e.name+".value"}else if(n.isReference)return t?e.name:e.name+".value"}}else if(e.kind===c.Types.Literal||e.kind===c.Types.Parameter)return e.value;return e.name}},{key:"compileMemberExpression",value:function(e){this.compileStatement(e.left),this.write("."),e.right.kind===c.Types.MemberExpression?this.compileMemberExpression(e.right):e.right.kind===c.Types.Identifier?this.write(this.compileIdentifier(e.right,!0)):this.compileStatement(e.right)}},{key:"compileCallExpression",value:function(e){var t=e.arguments,n=0,i=t.length,r=null;for(this.write(this.compileIdentifier(e.callee,!1)),this.write("(");i>n;++n)r=t[n].value,this.compileStatement(t[n]),i>n+1&&this.write(",");this.write(")")}},{key:"compileEnumeration",value:function(e){var t=e.body,n=e["export"];n?(this.write("var "+t.name+" = "+this["export"]),this.write("."),this.write(t.name)):this.write("var "+t.name),this.write(" = {}; \n"),this.write(this.compileEnumerationBody(t))}},{key:"compileEnumerationBody",value:function(e){var t=e.body,n=e.name,i=0,r=0,s=t.length,a="";for(a+="(("+n+") => {\n";s>i;++i)a+=n+"["+n+'["'+t[i].value+'"] = '+r++ +'] = "'+t[i].value+'";\n';return a+="})("+n+" || ("+n+" = {}))\n"}},{key:"compileReturnStatement",value:function(e){if(e.argument){this.write("return ");var t=this.scope.getByType(c.Types.FunctionDeclaration);if(t.returns.length){this.write("({");for(var n=t.returns,i=0,r=n.length;r>i;++i)this.write(n[i].value),this.write(":"),this.compileBinaryExpression(e.argument[i]),r>i+1&&this.write(",");this.write("})")}else this.compileBinaryExpression(e.argument)}}},{key:"compileIfStatement",value:function(e){this.write("if ("),this.compileBinaryExpression(e.test),this.write(")"),null!==e.consequent&&(this.write("{\n"),this.pushScope(e.context),this.compileBlock(e.consequent.body),this.popScope(),this.write("\n}\n")),null!==e.alternate&&(e.alternate.kind===c.Types.Block?(this.write("else {\n"),this.pushScope(e.context),this.compileBlock(e.alternate.body),this.popScope(),this.write("}\n")):(this.write("else "),this.compileIfStatement(e.alternate)))}},{key:"compileFunctionDeclaration",value:function(e){var t=e.body,n=e["export"],i=t.name;this.write("var "+i+" = "),n&&(this.write(this["export"]),this.write("."),this.write(i),this.write(" = ")),this.pushScope(e.body.context),this.write("("),this.compileParameters(t.param),this.write(")"),this.write(" => {\n"),this.compileBlock(t.body.body),this.popScope(),this.write("\n}\n")}},{key:"compileParameters",value:function(e){for(var t=0,n=e.length;n>t;++t)this.compileBinaryExpression(e[t]),n>t+1&&this.write(",")}},{key:"compileImport",value:function(e){if(!(e.body.length<0)){var t=!0,n=!1,i=void 0;try{for(var r,s=e.body[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var a=r.value;a.kind===c.Types.Literal&&console.log(a)}}catch(o){n=!0,i=o}finally{try{!t&&s["return"]&&s["return"]()}finally{if(n)throw i}}}}},{key:"compileVariableDeclaration",value:function(e){this.write("let"===e.symbol?"const":e.symbol),this.write(" "),this.write(e.id),this.write(" = "),e.init&&(e.isReference?(this.write("{\n"),this.write("value:"),this.compileBinaryExpression(e.init),this.write("}\n")):e.init.kind===c.Types.ArrayDeclaration?this.compileArrayConstruction(e.init):(this.compileBinaryExpression(e.init),this.write(";")))}},{key:"compileMultipleVariableDeclaration",value:function(e){for(var t=0,n=e.body.length;n>t;++t)this.compileVariableDeclaration(e.body[t])}},{key:"compileArrayConstruction",value:function(e){this.write("new "+this.runtime+".ArrayConstructor("),this.compileTupleExpression(e.param),this.write(")\n")}},{key:"compileTupleExpression",value:function(e){var t=0,n=e.length,i=null;for(this.write("{");n>t;++t)i=e[t],this.write(i.name),this.write(":"),this.compileBinaryExpression(i.init),n>t+1&&this.write(",");this.write("}")}}]),t}(u["default"]);n["default"]=h},{"../../Generate":6,"../../Parse/nodes":9,"../../Tokenize/tokens":15,"../../utils":17}],6:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("../Tokenize/tokens"),a=e("../Parse/nodes"),o=function(){function e(){i(this,e),this.output="",this.scope=null}return r(e,[{key:"reset",value:function(){this.output=""}},{key:"write",value:function(e){this.output+=e}},{key:"pushScope",value:function(e){this.scope=e}},{key:"popScope",value:function(){this.scope=this.scope.parent}},{key:"compileBinaryExpression",value:function(e){e.kind===a.Types.BinaryExpression?(this.write("("),this.compileStatement(e.left),this.write(this.compileOperand(e.operator)),this.compileStatement(e.right),this.write(")")):this.compileStatement(e)}},{key:"compileOperand",value:function(e){switch(e){case s.TOKEN["*"]:return"*";case s.TOKEN["/"]:return"/";case s.TOKEN["+"]:return"+";case s.TOKEN["-"]:return"-";case s.TOKEN[">"]:return">";case s.TOKEN["<"]:return"<";case s.TOKEN["="]:return"=";case s.TOKEN["%"]:return"%";case s.TOKEN["=="]:return"==";case s.TOKEN["."]:return".";default:console.error("Unknown operand:",e)}}}]),e}();n["default"]=o},{"../Parse/nodes":9,"../Tokenize/tokens":15}],7:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){return void 0!==e&&void 0!==this.current&&e.indexOf(this.current.kind)>-1}function s(){for(var e=[],t=null;!0&&(t=new c["default"].ObjectExpression,t.name=this.current.value,this.next(),this.expect(h.TOKEN[":"]),t.init=this.parseExpression(0),e.push(t),this.peek(h.TOKEN[","]));)this.next();return e}function a(e){var t=null,n=null,i=null,r=null;for(t=h.precedence[e],n=void 0===t?this.parseUnary():this.parseExpression(e+1);this.acceptPrecedenceState(t);){if(i=this.peek(h.TOKEN["."])?new c["default"].MemberExpression:new c["default"].BinaryExpression,i.operator=this.current.kind,i.left=n,this.next(),r=void 0===t?this.parseUnary():this.parseExpression(e+1),null===r)return null;i.right=r,n=i,this.eat(h.TOKEN[";"])}return n}function o(){var e=null,t=null;if(this.peek(h.TOKEN["-"])===!0){if(e=new c["default"].BinaryExpression,e.operator=this.current.kind,t=new c["default"].Literal,t.name="NUMBER",t.value=0,e.right=t,this.next(),null===(t=this.parseBase()))return null;e.left=t}else if(this.peek(h.TOKEN["!"])===!0)e=new c["default"].UnaryExpression,e.operator=this.current.kind,this.next(),e.init=this.parseExpression(0);else if(this.peek(h.TOKEN["+"])===!0&&this.next(),!(e=this.parseBase()))return null;return e}function l(){var e=null;if(this.peek(h.TOKEN["true"])===!0||this.peek(h.TOKEN["false"])===!0)e=new c["default"].Identifier,e.name=this.current.value,this.next();else if(this.peek(h.TOKEN.number)===!0)e=new c["default"].Literal,e.name=this.current.name,e.value=Number(this.current.value),this.next();else if(this.peek(h.TOKEN.string)===!0)e=new c["default"].Literal,e.name=this.current.name,e.value=this.current.value,this.next();else if(this.peek(h.TOKEN["("])===!0)this.next(),e=this.parseExpression(0),this.next();else if(this.peek(h.TOKEN["&"])===!0){this.next(),this.peek(h.TOKEN.identifier)&&(e=this.parseExpression(0)),e.isPointer=!0;var t=this.scope.get(e.name);t.kind===u.Types.VariableDeclaration&&(t.isReference=!0)}else if(this.peek(h.TOKEN.identifier)===!0){if(e=new c["default"].Identifier,e.name=this.current.value,this.next(),this.peek(h.TOKEN["("]))e=this.parseCallExpression(e);else if(this.peek(h.TOKEN[":"]))return this.back(),this.parseTupleExpressions()}else if(this.eat(h.TOKEN["["])){var n=this.parseType(this.current,"*");null!==n&&(e=new c["default"].ArrayDeclaration,e.types.push(n),this.eat(h.TOKEN["]"])&&(this.peek(h.TOKEN["("])&&(e.param=this.parseExpressionParameters()),this.eat(h.TOKEN[";"])))}return e}Object.defineProperty(n,"__esModule",{value:!0}),n.acceptPrecedenceState=r,n.parseTupleExpressions=s,n.parseExpression=a,n.parseUnary=o,n.parseBase=l;var u=e("./nodes"),c=i(u),h=e("../Tokenize/tokens")},{"../Tokenize/tokens":15,"./nodes":9}],8:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=e("../utils"),l=e("../Tokenize/tokens"),u=e("./nodes"),c=r(u),h=e("./scope"),p=r(h),f=e("./expression"),_=i(f),d=function(){function e(){s(this,e),this.index=0,this.tokens=[],this.previous=null,this.current=null,this.scope=null,this.scopes={},this.reset(this.tokens)}return a(e,[{key:"eat",value:function(e){return this.peek(e)?(this.next(),!0):!1}},{key:"peek",value:function(e){return void 0!==this.current&&this.current.kind===e}},{key:"next",value:function(){return this.index<this.tokens.length?(this.index++,this.previous=this.current,this.current=this.tokens[this.index],!0):!1}},{key:"back",value:function(){return this.index<this.tokens.length?(this.index--,this.previous=this.current,this.current=this.tokens[this.index],!0):!1}},{key:"expect",value:function(e){return this.peek(e)?(this.next(),!0):(void 0!==this.current&&console.error("Expected "+e),!1)}},{key:"reset",value:function(e){this.index=0,this.tokens=e,this.scopes={},this.previous=this.current=this.tokens[this.index]}},{key:"parse",value:function(e){var t=new c["default"].Program;return this.reset(e),this.tokens=e,this.scope=void 0,this.pushScope(t),t.body=this.parseBlock(),console.log(t),t}},{key:"pushScope",value:function(e){e.context=new p["default"](e,this.scope),this.scope=e.context,this.scopes[(0,o.uHash)()]=this.scope}},{key:"popScope",value:function(){this.scope=this.scope.parent}},{key:"parseBlock",value:function(){var e=new c["default"].Block;return e.body=this.parseStatements(),e}},{key:"parseIfStatement",value:function(){var e=new c["default"].IfStatement;return this.expect(l.TOKEN["if"])||this.expect(l.TOKEN["else"])?(e.label=this.previous.value,this.eat(l.TOKEN["("]),e.test=this.parseExpression(0),this.eat(l.TOKEN[")"]),this.peek(l.TOKEN["{"])&&(this.pushScope(e),e.consequent=this.parseBody(),this.popScope()),this.eat(l.TOKEN["else"])&&(this.peek(l.TOKEN["if"])?e.alternate=this.parseIfStatement():this.peek(l.TOKEN["{"])&&(this.pushScope(e),e.alternate=this.parseBody(),this.popScope())),e):null}},{key:"parseFunction",value:function(){var e=new c["default"].FunctionDeclaration;return this.pushScope(e),this.expect(l.TOKEN.func)?(this.expect(l.TOKEN.identifier)&&(e.name=this.previous.value),this.expect(l.TOKEN["("])&&(e.param=this.parseParameters(!0),this.expect(l.TOKEN[")"])),this.peek(l.TOKEN["->"])?(e.type=this.parseType(e,"->"),this.back(),this.peek(l.TOKEN["("])?(this.next(),e.returns=this.parseParameters(!0),this.next()):this.next()):(e.type=new c["default"].Type,e.type.type="auto"),this.scope.parent.register(e),this.peek(l.TOKEN["{"])&&(e.body=this.parseBody()),this.popScope(),e):null}},{key:"parseReturn",value:function(){var e=new c["default"].ReturnStatement;if(this.expect(l.TOKEN["return"])){var t=this.scope.getByType(u.Types.FunctionDeclaration);t.returns.length?this.peek(l.TOKEN["("])&&(this.next(),e.argument=this.parseExpressionParameters(),this.eat(l.TOKEN[")"])):e.argument=this.parseExpression(0)}return this.eat(l.TOKEN[";"]),e}},{key:"parseVariableDeclaration",value:function(){var e=null,t=null;if(!this.peek(l.TOKEN.let)&&!this.peek(l.TOKEN["var"]))return null;if(t=this.current.value,this.next(),this.peek(l.TOKEN.identifier))e=new c["default"].VariableDeclaration,e.id=this.current.value,e.symbol=t,this.next(),this.scope.register(e),this.peek(l.TOKEN["="])?(this.next(),e.init=this.parseExpression(0),e.type=new c["default"].Type,e.type.type="auto"):(e.type=this.parseType(e,":"),this.eat(l.TOKEN["="])&&(e.init=this.parseExpression(0)));else if(this.eat(l.TOKEN["("])){e=new c["default"].MultipleVariableDeclaration,e.symbol=t,e.body=this.parseExpressionParameters(),this.expect(l.TOKEN[")"]),this.expect(l.TOKEN["="]),this.expect(l.TOKEN["("]);for(var n=this.parseExpressionParameters(),i=0;i<e.body.length;++i){
var r=new c["default"].VariableDeclaration;r.id=e.body[i].name,r.symbol=t,r.init=n[i],r.type=new c["default"].Type,r.type.type="auto",e.body[i]=r,this.scope.register(r)}this.expect(l.TOKEN[")"])}return this.eat(l.TOKEN[";"]),e}},{key:"parseBody",value:function(){var e=null;return this.expect(l.TOKEN["{"])?(e=this.parseBlock(),this.expect(l.TOKEN["}"])?e:null):e}},{key:"parseStatements",value:function(){for(var e=[],t=null;!this.peek(l.TOKEN["}"])&&void 0!==this.current&&(t=this.parseStatement(),null!==t.body);)e.push(t);return e}},{key:"parseImport",value:function(){var e=new c["default"].ImportStatement;return this.peek(l.TOKEN.identifier)&&(e.body=this.parseExpressionParameters()),e}},{key:"parseStatement",value:function(){var e=new c["default"].Statement;return this.eat(l.TOKEN["import"])?(e.body=this.parseImport(),this.eat(l.TOKEN[";"]),e):(this.eat(l.TOKEN["export"])&&(this.peek(l.TOKEN.func)||this.peek(l.TOKEN.let)||this.peek(l.TOKEN["var"])||this.peek(l.TOKEN["enum"]))&&(e["export"]=!0),this.peek(l.TOKEN.let)||this.peek(l.TOKEN["var"])?e.body=this.parseVariableDeclaration():this.peek(l.TOKEN["if"])?e.body=this.parseIfStatement():this.peek(l.TOKEN.func)?e.body=this.parseFunction():this.peek(l.TOKEN["return"])?e.body=this.parseReturn():this.peek(l.TOKEN["enum"])?e.body=this.parseEnum():e.body=this.parseExpression(0),e)}},{key:"parseCallExpression",value:function(e){if(e.kind!==u.Types.Identifier)return null;var t=new c["default"].CallExpression;return t.callee=e,this.expect(l.TOKEN["("]),t.arguments=this.parseExpressionParameters(),this.expect(l.TOKEN[")"]),this.eat(l.TOKEN[";"]),t}},{key:"parseExpressionParameters",value:function(){for(var e=null,t=[];!0&&(e=this.parseStatement(),e=e.body,null!==e&&(e.length?t=e:t.push(e)),this.peek(l.TOKEN[","]));)this.next();return t}},{key:"parseEnum",value:function(){var e=new c["default"].Enumeration;return this.eat("enum"),this.peek(l.TOKEN["enum"])?(this.next(),this.peek(l.TOKEN.identifier)?(e.name=this.current.value,this.next(),this.expect(l.TOKEN["{"]),e.body=this.parseParameters(!1),this.expect(l.TOKEN["}"]),this.eat(l.TOKEN[";"]),this.scope.register(e),e):e):e}},{key:"parseParameters",value:function(e){var t=null,n=[];if(this.peek(l.TOKEN[")"]))return n;for(;!0&&(t=new c["default"].Parameter,this.eat(l.TOKEN.inout)&&(t.reference=!0),t.name=this.current.kind,t.value=this.current.value,this.next(),e&&(t.type=this.parseType(t,":")),this.scope.register(t,this.scope),n.push(t),this.peek(l.TOKEN[","]));)this.next();return n}},{key:"parseType",value:function(e,t){var n=new c["default"].Type;return"*"===t||this.expect(l.TOKEN[t])?(n.type=this.current.value,this.next(),n):null}}]),e}();n["default"]=d,(0,o.inherit)(d,_)},{"../Tokenize/tokens":15,"../utils":17,"./expression":7,"./nodes":9,"./scope":10}],9:[function(e,t,n){"use strict";function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0});var o,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n.Types=(o={Program:0,Block:1,ReturnStatement:2,Literal:3,Identifier:4,IfStatement:5,BinaryExpression:6,MemberExpression:7,CallExpression:8,AssignmentExpression:9,FunctionDeclaration:10,Type:11,Statement:12,VariableDeclaration:13,ImportStatement:14,Enumeration:15,Parameter:16},a(o,"MemberExpression",17),a(o,"MultipleVariableDeclaration",18),a(o,"ArrayDeclaration",19),a(o,"ObjectExpression",20),o),c=function(){function e(){s(this,e)}return l(e,null,[{key:"ArrayDeclaration",get:function(){return function e(){s(this,e),this.kind=u.ArrayDeclaration,this.types=[],this.param=[]}}},{key:"ObjectExpression",get:function(){return function e(){s(this,e),this.kind=u.ObjectExpression,this.name=null,this.init=null}}},{key:"MemberExpression",get:function(){return function e(){s(this,e),this.kind=u.MemberExpression,this.left=null,this.right=null}}},{key:"Enumeration",get:function(){return function e(){s(this,e),this.kind=u.Enumeration,this.body=[]}}},{key:"Parameter",get:function(){return function e(){s(this,e),this.kind=u.Parameter,this.name=null,this.type=null,this.reference=!1}}},{key:"Type",get:function(){return function e(){s(this,e),this.kind=u.Type,this.type=null}}},{key:"FunctionDeclaration",get:function(){return function e(){s(this,e),this.kind=u.FunctionDeclaration,this.name=null,this.type=null,this.param=[],this.body=[],this.returns=[]}}},{key:"Program",get:function(){return function e(){s(this,e),this.kind=u.Program,this.body=[]}}},{key:"Statement",get:function(){return function e(){s(this,e),this.kind=u.Statement,this.body=null,this["export"]=!1}}},{key:"Body",get:function(){return function e(){s(this,e),this.kind=u.Body,this.body=[]}}},{key:"Block",get:function(){return function e(){s(this,e),this.kind=u.Block,this.body=[]}}},{key:"ReturnStatement",get:function(){return function e(){s(this,e),this.kind=u.ReturnStatement,this.argument=null}}},{key:"ImportStatement",get:function(){return function e(){s(this,e),this.kind=u.ImportStatement,this.body=[]}}},{key:"VariableDeclaration",get:function(){return function e(){s(this,e),this.kind=u.VariableDeclaration,this.type=null,this.id=null,this.init=null,this.isReference=!1,this.symbol=null}}},{key:"MultipleVariableDeclaration",get:function(){return function e(){s(this,e),this.kind=u.MultipleVariableDeclaration,this.body=[]}}},{key:"Literal",get:function(){return function e(){s(this,e),this.kind=u.Literal,this.name=null,this.value=null}}},{key:"Identifier",get:function(){return function e(){s(this,e),this.kind=u.Identifier,this.name=null,this.isPointer=!1}}},{key:"IfStatement",get:function(){return function e(){s(this,e),this.kind=u.IfStatement,this.test=null,this.consequent=null,this.alternate=null}}},{key:"BinaryExpression",get:function(){return function e(){s(this,e),this.kind=u.BinaryExpression,this.operator=null,this.left=null,this.right=null}}},{key:"CallExpression",get:function(){return function e(){s(this,e),this.kind=u.CallExpression,this.callee=null,this.arguments=[]}}},{key:"AssignmentExpression",get:function(){return function(e){function t(){s(this,t);var e=i(this,Object.getPrototypeOf(t).call(this,null));return e.kind=u.AssignmentExpression,e}return r(t,e),t}(BinaryExpression)}}]),e}();n["default"]=c},{}],10:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=(e("./nodes"),function(){function e(t,n){i(this,e),this.scope=t,this.parent=n,this.table={}}return r(e,[{key:"get",value:function(e){return void 0!==this.table[e]?this.table[e]:void 0!==this.parent?this.parent.get(e):void 0}},{key:"getByType",value:function(e){return this.scope&&this.scope.kind===e?this.scope:void 0!==this.parent?this.parent.getByType(e):void 0}},{key:"register",value:function(e){var t=e.value||e.name||e.id;void 0!==t&&null!==t&&(this.table[t]=e)}}]),e}());n["default"]=s},{"./nodes":9}],11:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n.ArrayConstructor=function(){function e(t){i(this,e),this.data=null,this.count=0,this.init(t)}return r(e,[{key:"init",value:function(e){void 0!==e.count?(this.data=Array.from(new Array(e.count),function(){return 0}),this.count=this.data.length):this.data=[],void 0!==e.repeatedValue&&this.data.length>0&&this.data.fill(e.repeatedValue)}},{key:"append",value:function(e){this.data.push(e),this.count+=1}}]),e}()},{}],12:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=e("../utils"),a=e("./class"),o=i(a),l=function u(){r(this,u),this.global={print:function(){console.log.apply(console,arguments)}}};n["default"]=l,(0,s.inherit)(l,o)},{"../utils":17,"./class":11}],13:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("../Tokenize/tokens"),a=e("../Parse/nodes"),o=function(){function e(){i(this,e),this.scope=null}return r(e,[{key:"pushScope",value:function(e){this.scope=e}},{key:"popScope",value:function(){this.scope=this.scope.parent}},{key:"analyze",value:function(e){this.pushScope(e.context),this.analyzeBlock(e.body.body),this.scope=e.context}},{key:"isNumber",value:function(e){return Number(e)>=0||Number(e)<0}},{key:"analyzeBlock",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var o=r.value;o.kind===a.Types.Statement&&this.analyzeStatement(o)}}catch(l){n=!0,i=l}finally{try{!t&&s["return"]&&s["return"]()}finally{if(n)throw i}}}},{key:"analyzeStatement",value:function(e){var t=e.body||e;switch(t.kind){case a.Types.ImportStatement:this.analyzeImport(t);break;case a.Types.VariableDeclaration:this.analyzeVariableDeclaration(t);break;case a.Types.MultipleVariableDeclaration:this.analyzeMultipleVariableDeclaration(t);break;case a.Types.IfStatement:this.analyzeIfStatement(t);break;case a.Types.FunctionDeclaration:this.analyzeFunctionDeclaration(e);break;case a.Types.ReturnStatement:this.analyzeReturnStatement(t);break;case a.Types.Enumeration:this.analyzeEnumeration(e);break;case a.Types.CallExpression:this.analyzeCallExpression(t);break;case a.Types.MemberExpression:this.analyzeMemberExpression(t);break;case a.Types.Literal:case a.Types.Parameter:case a.Types.Identifier:this.analyzeIdentifier(t);break;default:this.analyzeBinaryExpression(t)}}},{key:"analyzeIdentifier",value:function(e,t){var n=null;if(e.kind===a.Types.Identifier){if(n=this.scope.get(e.name,this.scope)){if(e.isPointer)return e.name;if(n.kind===a.Types.Parameter){if(!e.isPointer&&n.reference)return e.name+".value"}else if(n.isReference)return e.name+".value"}}else if(e.kind===a.Types.Literal||e.kind===a.Types.Parameter)return e.value;return e.name}},{key:"analyzeMemberExpression",value:function(e){this.analyzeStatement(e.left),e.right.kind===a.Types.Identifier?this.analyzeIdentifier(e.right,!0):this.analyzeStatement(e.right)}},{key:"analyzeCallExpression",value:function(e){for(var t=e.arguments,n=(this.analyzeStatement(e.callee),0),i=t.length,r=null;i>n;++n)r=t[n].value,this.analyzeStatement(t[n])}},{key:"analyzeEnumeration",value:function(e){var t=e.body;e["export"];this.analyzeEnumerationBody(t)}},{key:"analyzeEnumerationBody",value:function(e){var t=e.body;e.name,t.length}},{key:"analyzeReturnStatement",value:function(e){if(e.argument){var t=this.scope.getByType(a.Types.FunctionDeclaration);if(t.returns.length)for(var n=t.returns,i=0,r=n.length;r>i;++i)this.analyzeBinaryExpression(e.argument[i]);else this.analyzeBinaryExpression(e.argument)}}},{key:"analyzeIfStatement",value:function(e){this.analyzeBinaryExpression(e.test),null!==e.consequent&&(this.pushScope(e.context),this.analyzeBlock(e.consequent.body),this.popScope()),null!==e.alternate&&(e.alternate.kind===a.Types.Block?(this.pushScope(e.context),this.analyzeBlock(e.alternate.body),this.popScope()):this.analyzeIfStatement(e.alternate))}},{key:"analyzeFunctionDeclaration",value:function(e){var t=e.body;e["export"],t.name;this.pushScope(e.body.context),this.analyzeParameters(t.param),this.analyzeBlock(t.body.body),this.popScope()}},{key:"analyzeParameters",value:function(e){for(var t=0,n=e.length;n>t;++t)this.analyzeBinaryExpression(e[t])}},{key:"analyzeImport",value:function(e){if(!(e.body.length<0)){var t=!0,n=!1,i=void 0;try{for(var r,s=e.body[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var o=r.value;o.kind===a.Types.Literal&&console.log(o)}}catch(l){n=!0,i=l}finally{try{!t&&s["return"]&&s["return"]()}finally{if(n)throw i}}}}},{key:"analyzeVariableDeclaration",value:function(e){e.init&&(e.isReference?this.analyzeBinaryExpression(e.init):e.init.kind===a.Types.ArrayDeclaration?this.analyzeArrayConstruction(e.init):this.analyzeBinaryExpression(e.init))}},{key:"analyzeMultipleVariableDeclaration",value:function(e){for(var t=0,n=e.body.length;n>t;++t)this.analyzeVariableDeclaration(e.body[t])}},{key:"analyzeArrayConstruction",value:function(e){this.analyzeTupleExpression(e.param)}},{key:"analyzeTupleExpression",value:function(e){for(var t=0,n=e.length,i=null;n>t;++t)i=e[t],this.analyzeBinaryExpression(i.init)}},{key:"evaluateBinaryExpression",value:function(e,t,n){switch(n){case"+":return e+t;case"-":return e-t;case"*":return e*t;case"/":return e/t;case">":return e>t;case"<":return t>e;case"%":return t>e;case"==":return e===t}}},{key:"analyzeBinaryExpression",value:function(e){e.kind===a.Types.BinaryExpression?(this.analyzeStatement(e.left),this.analyzeOperand(e.operator),this.analyzeStatement(e.right)):this.analyzeStatement(e)}},{key:"analyzeOperand",value:function(e){switch(e){case s.TOKEN["*"]:return"*";case s.TOKEN["/"]:return"/";case s.TOKEN["+"]:return"+";case s.TOKEN["-"]:return"-";case s.TOKEN[">"]:return">";case s.TOKEN["<"]:return"<";case s.TOKEN["="]:return"=";case s.TOKEN["%"]:return"%";case s.TOKEN["=="]:return"==";case s.TOKEN["."]:return".";default:console.error("Unknown operand:",e)}}}]),e}();n["default"]=o},{"../Parse/nodes":9,"../Tokenize/tokens":15}],14:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("./tokens"),o=i(a),l=function(){function e(){r(this,e),this.TOKEN=o.TOKEN,this.IGNORE=o.IGNORE,this.buffer=null,this.index=0}return s(e,[{key:"isDigit",value:function(e){return e>=48&&57>=e}},{key:"isAlpha",value:function(e){return e>64&&91>e||e>96&&123>e}},{key:"isAlphaDigit",value:function(e){return e>47&&58>e||e>64&&91>e||e>96&&123>e||95===e}},{key:"isString",value:function(e){return 34===e||39===e}},{key:"isValidToken",value:function(e){return void 0!==e.kind&&this.IGNORE.indexOf(e.kind)<=-1}},{key:"isIgnoredName",value:function(e){return this.IGNORE.indexOf(e)<=-1}},{key:"readNumber",value:function(){for(var e=this.index+1,t=null;e<this.length&&(t=this.buffer.charAt(e).charCodeAt(0),46===t||this.isDigit(t)!==!1);++e);var n=this.buffer.slice(this.index,e);return this.index=e,{kind:this.TOKEN.number,value:n}}},{key:"readIdentifier",value:function(){for(var e=this.index+1;e<this.length&&this.isAlphaDigit(this.buffer.charAt(e).charCodeAt(0))===!0;++e);var t=this.buffer.slice(this.index,e);return this.index=e,void 0!==this.TOKEN[t]?{kind:this.TOKEN[t],value:t}:{kind:this.TOKEN.identifier,value:t}}},{key:"readString",value:function(){var e=this.buffer.indexOf("'",this.index+1);if(-1===e&&(e=this.buffer.indexOf('"',this.index+1),-1===e))throw new Error("Unexpected quote at "+this.index+"!");var t={kind:this.TOKEN.string,value:this.buffer.slice(this.index,e+1)};return this.index=e+1,t}},{key:"readNegativeNumber",value:function(){var e=null;return e=this.readNumber(),e.value="-"+e.value,e}},{key:"readSign",value:function(){for(var e=null,t=0,n=null,i="";!0;){if(e=this.buffer.charAt(this.index),t=e.charCodeAt(0),this.isDigit(t)===!0&&"-"===i)return this.readNegativeNumber();if(void 0===this.TOKEN[i+e])break;if(i+=e,this.index++,n=this.TOKEN[i],this.index>this.length)break}return{kind:n,value:i}}},{key:"lex",value:function(e){this.index=0,this.buffer=e,this.length=this.buffer.length;for(var t=null,n=null,i=0,r=null,s=[];!0&&((t=this.buffer.charAt(this.index))&&!(this.index>=this.length));)i=t.charCodeAt(0),void 0!==(n=this.TOKEN[t])?(r=this.readSign(),this.isValidToken(r)===!0&&s.push(r)):this.isDigit(i)===!0?(r=this.readNumber(),this.isValidToken(r)===!0&&s.push(r)):this.isAlpha(i)===!0?(r=this.readIdentifier(),this.isValidToken(r)===!0&&s.push(r)):this.isString(i)===!0&&(r=this.readString(),this.isValidToken(r)===!0&&s.push(r));return s}}]),e}();n["default"]=l},{"./tokens":15}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.precedence=[[28],[13],[14],[26,27],[23,22,25,24],[16,17],[18,19,20],[8]],n.TOKEN={"(":0,")":1,"[":2,"]":3,"{":4,"}":5,":":6,";":7,".":8,"?":9,$:10,"@":11,"!":12,"||":13,"&&":14,",":15,"+":16,"-":17,"*":18,"/":19,"%":20,"^":21,"<":22,"<=":23,">":24,">=":25,"==":26,"!=":27,"=":28,"~":29,"|":30,"&":31,"null":32,"true":33,"false":34,"if":35,"else":36,"while":37,"do":38,"for":39,func:40,let:41,"var":42,"const":43,"return":44,"import":45,"export":46,inout:47,"enum":48,"->":49,identifier:50,string:51,number:52," ":53,"	":54,"\n":55,"\r":56,"\f":57,"\x0B":58,Void:59,Int:60,Int8:61,UInt8:62,Int32:63,Int64:64,UInt64:65,Double:66,Float:67,Bool:68,String:69,Character:70},n.IGNORE=[53,54,55,56,57,58]},{}],16:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("./Tokenize"),o=i(a),l=e("./Parse"),u=i(l),c=e("./Runtime"),h=i(c),p=e("./Semantic"),f=i(p),_=e("./Generate/JavaScript"),d=i(_),y=e("js-beautify"),m=i(y);!function(){var e=function(){function e(){r(this,e),this.lexer=new o["default"],this.parser=new u["default"],this.runtime=new h["default"],this.semantic=new f["default"],this.compiler=new d["default"]}return s(e,[{key:"readProject",value:function(e,t){var n=this,i=0,r="";e.map(function(s){n.fetch(s,function(n){++i,r+=n,i>=e.length&&t(r)})})}},{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){var n={method:"get"};fetch(e,n).then(function(e){return e.text()}).then(function(e){t(e)})})},{key:"compile",value:function(e){var t=this.lexer.lex(e),n=this.parser.parse(t);this.semantic.analyze(n);var i=this.compiler.compile(n,this);return(0,m["default"])(i,{indent_size:2})}},{key:"run",value:function(e){this.compiler.run(e)}}]),e}();!function(){return window.Swiftly=n.Swiftly=e}()}()},{"./Generate/JavaScript":5,"./Parse":8,"./Runtime":12,"./Semantic":13,"./Tokenize":14,"js-beautify":1}],17:[function(e,t,n){"use strict";function i(e,t){var n=null;for(n in t)t[n]instanceof Function&&(e.prototype[n]=t[n])}function r(){var e=++a;return o.indexOf(e)>-1?this.uHash():(o.push(e),e)}function s(e){var t=Number(e)>=0||Number(e)<0,n="true"===e||"false"===e,i=!t&&!n;return{isString:i,isNumber:t,isBoolean:n}}Object.defineProperty(n,"__esModule",{value:!0}),n.inherit=i,n.uHash=r,n.parseString=s;var a=-1,o=[]},{}]},{},[16])(16)});
